uniform sampler2D texture;
varying vec2 texcoord;
uniform vec3 color;

uniform float limit;

void main()
{
	gl_FragColor = mix(vec4(gl_Fog.color.rgb, 1.0), vec4(color*texture2D(texture, texcoord).rgb, 0.8), clamp(exp(-gl_Fog.density*gl_FogFragCoord), 1.465 - limit, 1.0));
}